# 研究点一方案效果对比试验

256GB 128MB 

压力大可能导致大部分都只有l0 到 l1的压实  

因此可能会导致l1层文件积压  所以参数设置
l0层前64个   后面混着用就好




rocksdb目录下  常用命令：  已更新至脚本
```shell
blkzone reset /dev/nvme0n1

echo mq-deadline > /sys/block/nvme0n1/queue/scheduler

DEBUG_LEVEL=0 ROCKSDB_PLUGINS=zenfs make clean
export CXXFLAGS="-I/usr/include -L/usr/lib/x86_64-linux-gnu"
DEBUG_LEVEL=0 ROCKSDB_PLUGINS=zenfs make -j4 db_bench install

rm -rf /home/femu/workspace/My_ConfZNS/trial/rocksdblogs/*

./plugin/zenfs/util/zenfs mkfs --zbd=nvme0n1 --aux_path=/home/femu/workspace/My_ConfZNS/trial/rocksdblogs --force

./db_bench \
  --fs_uri=zenfs://dev:nvme0n1 \
  --benchmarks="mixgraph_together" \
  --statistics \
  --disable_wal \
  --use_direct_io_for_flush_and_compaction \
  -use_direct_reads=true \
  -keyrange_dist_a=24.18 \
  -keyrange_dist_b=-8.917 \
  -keyrange_dist_c=0.0164 \
  -keyrange_dist_d=-0.08082 \
  -keyrange_num=30 \
  -iter_k=2.517 \
  -iter_sigma=14.236 \
  -sine_mix_rate \
  -sine_mix_rate_interval_milliseconds=5000 \
  -sine_a=100 \
  -sine_b=0.000073 \
  -sine_d=450 \
  --duration=180 \
  -num=1000000 \
  -key_size=48 > output.txt
```

```c++
DEFINE_double(a_qps,1600.0,"qps");
DEFINE_int32(a_bs,128,"bs");
DEFINE_double(a_rw,0.5,"rw");

DEFINE_double(b_qps,400.0,"qps");
DEFINE_int32(b_bs,32 ,"bs");
DEFINE_double(b_rw,0.5,"rw");

DEFINE_double(c_qps,200.0,"qps");
DEFINE_int32(c_bs,16 ,"bs");
DEFINE_double(c_rw,0.5,"rw");

DEFINE_double(d_qps,100.0,"qps");
DEFINE_int32(d_bs,8 ,"bs");
DEFINE_double(d_rw,0.5,"rw");
//======================================================
DEFINE_double(a_wm_qps,800.0,"qps");
DEFINE_int32(a_wm_bs,128 ,"bs");
DEFINE_double(a_wm_rw,1.0,"rw");

DEFINE_double(b_wm_qps,3200.0,"qps");
DEFINE_int32(b_wm_bs,32 ,"bs");
DEFINE_double(b_wm_rw,1.0,"rw");

DEFINE_double(c_wm_qps,6400.0,"qps");
DEFINE_int32(c_wm_bs,16 ,"bs");
DEFINE_double(c_wm_rw,1.0,"rw");

DEFINE_double(d_wm_qps,12800.0,"qps");
DEFINE_int32(d_wm_bs,8,"bs");
DEFINE_double(d_wm_rw,1.0,"rw");

```





